<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KB Fortress AI - Smart Manufacturing Risk Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --kb-primary: #FFCC00;
            --kb-secondary: #785C00;
            --kb-dark: #1A1A1A;
            --kb-gray: #666666;
            --kb-light-gray: #F5F5F5;
            --kb-success: #00C896;
            --kb-warning: #FF6B35;
            --kb-danger: #FF3366;
            --kb-info: #3366FF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: #000;
            min-height: 100vh;
            overflow-x: hidden;
            color: #333;
        }

        /* ì• ë‹ˆë©”ì´ì…˜ ë°°ê²½ */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0A0A0A 0%, #1A1A1A 100%);
            z-index: -2;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--kb-primary);
            border-radius: 50%;
            animation: float 20s infinite linear;
            box-shadow: 0 0 10px var(--kb-primary);
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px);
                opacity: 0;
            }
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ */
        .nav-header {
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 204, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 20px 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--kb-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--kb-dark);
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(255, 204, 0, 0.5);
            }
        }

        .logo-text {
            color: white;
        }

        .logo-text h1 {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .logo-text p {
            font-size: 0.85em;
            color: var(--kb-primary);
            opacity: 0.9;
        }

        .nav-status {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 20px;
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid rgba(255, 204, 0, 0.3);
            border-radius: 25px;
            color: var(--kb-primary);
            font-size: 0.9em;
            animation: statusGlow 2s infinite;
        }

        @keyframes statusGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.2);
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 204, 0, 0.4);
            }
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--kb-success);
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .main-container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 0 20px;
        }

        /* í”„ë¡œê·¸ë ˆìŠ¤ ì¸ë””ì¼€ì´í„° */
        .progress-indicator {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 204, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255, 204, 0, 0.2);
            z-index: 0;
        }

        .progress-line-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, var(--kb-primary), var(--kb-warning));
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        .step {
            position: relative;
            z-index: 1;
            text-align: center;
            flex: 1;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            margin: 0 auto 10px;
            background: var(--kb-dark);
            border: 2px solid rgba(255, 204, 0, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--kb-gray);
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .step.active .step-circle {
            background: var(--kb-primary);
            color: var(--kb-dark);
            border-color: var(--kb-primary);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.5);
            animation: stepPulse 1.5s infinite;
        }

        @keyframes stepPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .step.completed .step-circle {
            background: var(--kb-success);
            border-color: var(--kb-success);
            color: white;
        }

        .step-label {
            color: var(--kb-gray);
            font-size: 0.85em;
            margin-top: 8px;
        }

        .step.active .step-label {
            color: var(--kb-primary);
            font-weight: 600;
        }

        /* í¼ ì¹´ë“œ */
        .form-card {
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.6s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-header {
            background: linear-gradient(135deg, var(--kb-primary) 0%, #FFD633 100%);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .card-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 60%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(35deg);
        }

        .card-header h2 {
            font-size: 2em;
            color: var(--kb-dark);
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .card-header p {
            color: var(--kb-secondary);
            font-size: 1.1em;
            position: relative;
            z-index: 1;
        }

        .form-body {
            padding: 40px;
        }

        /* ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .form-section {
            margin-bottom: 35px;
            opacity: 0;
            animation: fadeInSection 0.6s ease forwards;
        }

        .form-section:nth-child(1) { animation-delay: 0.1s; }
        .form-section:nth-child(2) { animation-delay: 0.2s; }
        .form-section:nth-child(3) { animation-delay: 0.3s; }
        .form-section:nth-child(4) { animation-delay: 0.4s; }

        @keyframes fadeInSection {
            to {
                opacity: 1;
            }
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--kb-light-gray);
        }

        .section-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--kb-primary), #FFD633);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.3);
        }

        .section-title h3 {
            font-size: 1.3em;
            color: var(--kb-dark);
            margin-bottom: 4px;
        }

        .section-title p {
            font-size: 0.9em;
            color: var(--kb-gray);
        }

        /* ì…ë ¥ í•„ë“œ */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--kb-dark);
            font-size: 0.95em;
            transition: color 0.3s ease;
        }

        .required-mark {
            color: var(--kb-danger);
            margin-left: 4px;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--kb-primary);
            box-shadow: 0 0 0 4px rgba(255, 204, 0, 0.1);
            transform: translateY(-2px);
        }

        .form-input:hover {
            border-color: var(--kb-primary);
        }

        /* ì…€ë ‰íŠ¸ ìŠ¤íƒ€ì¼ */
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
        }

        /* ë²”ìœ„ ìŠ¬ë¼ì´ë” */
        .range-container {
            margin-bottom: 25px;
        }

        .range-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .range-value {
            padding: 8px 16px;
            background: linear-gradient(135deg, var(--kb-primary), #FFD633);
            color: var(--kb-dark);
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.1em;
            min-width: 80px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(255, 204, 0, 0.3);
        }

        .range-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #E0E0E0;
            outline: none;
            -webkit-appearance: none;
            position: relative;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--kb-primary);
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .range-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 15px rgba(255, 204, 0, 0.4);
        }

        .range-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--kb-primary);
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .range-info {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.85em;
            color: var(--kb-gray);
        }

        /* ë¦¬ìŠ¤í¬ ì¸ë””ì¼€ì´í„° */
        .risk-indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background: var(--kb-light-gray);
            border-radius: 16px;
        }

        .risk-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .risk-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .risk-icon {
            width: 50px;
            height: 50px;
            margin: 0 auto 12px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .risk-low {
            background: rgba(0, 200, 150, 0.1);
            color: var(--kb-success);
        }

        .risk-medium {
            background: rgba(255, 204, 0, 0.1);
            color: var(--kb-warning);
        }

        .risk-high {
            background: rgba(255, 51, 102, 0.1);
            color: var(--kb-danger);
        }

        .risk-title {
            font-weight: 600;
            color: var(--kb-dark);
            margin-bottom: 4px;
        }

        .risk-status {
            font-size: 0.85em;
            color: var(--kb-gray);
        }

        /* ì œì¶œ ì„¹ì…˜ */
        .submit-section {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 204, 0, 0.05), rgba(255, 214, 51, 0.05));
            border-radius: 16px;
            text-align: center;
            border: 2px solid rgba(255, 204, 0, 0.2);
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--kb-primary), #FFD633);
            color: var(--kb-dark);
            border: none;
            padding: 18px 50px;
            font-size: 1.1em;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 204, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .submit-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 204, 0, 0.5);
        }

        .submit-btn:active {
            transform: translateY(-1px);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .submit-info {
            margin-top: 20px;
            color: var(--kb-gray);
            font-size: 0.95em;
            line-height: 1.6;
        }

        /* ì•Œë¦¼ í† ìŠ¤íŠ¸ */
        .toast {
            position: fixed;
            top: 100px;
            right: -400px;
            background: white;
            border-radius: 12px;
            padding: 20px 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 16px;
            transition: right 0.5s ease;
            z-index: 1000;
            max-width: 400px;
        }

        .toast.show {
            right: 20px;
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .toast-success .toast-icon {
            background: rgba(0, 200, 150, 0.1);
            color: var(--kb-success);
        }

        .toast-content h4 {
            margin-bottom: 4px;
            color: var(--kb-dark);
        }

        .toast-content p {
            color: var(--kb-gray);
            font-size: 0.9em;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .risk-indicators {
                grid-template-columns: 1fr;
            }

            .card-header {
                padding: 30px 20px;
            }

            .form-body {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ì• ë‹ˆë©”ì´ì…˜ ë°°ê²½ -->
    <div class="animated-bg"></div>
    <div class="particles" id="particles"></div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="nav-header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">KB</div>
                <div class="logo-text">
                    <h1>Fortress AI</h1>
                    <p>Smart Manufacturing Risk Management</p>
                </div>
            </div>
            <div class="nav-status">
                <span class="status-dot"></span>
                <span>ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì¤‘</span>
            </div>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="main-container">
        <!-- í”„ë¡œê·¸ë ˆìŠ¤ ì¸ë””ì¼€ì´í„° -->
        <div class="progress-indicator">
            <div class="progress-steps">
                <div class="progress-line">
                    <div class="progress-line-fill" id="progressFill"></div>
                </div>
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">ê¸°ì—… ì •ë³´</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">ì¬ë¬´ í˜„í™©</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">ì‚¬ì—… íŠ¹ì„±</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-label">ì•Œë¦¼ ì„¤ì •</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-circle">âœ“</div>
                    <div class="step-label">ì™„ë£Œ</div>
                </div>
            </div>
        </div>

        <!-- í¼ ì¹´ë“œ -->
        <div class="form-card">
            <div class="card-header">
                <h2>ğŸš€ ì œì¡°ì—… ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì‹œì‘í•˜ê¸°</h2>
                <p>AI ê¸°ë°˜ ì‹¤ì‹œê°„ ê¸ˆìœµ ë¦¬ìŠ¤í¬ ëª¨ë‹ˆí„°ë§ìœ¼ë¡œ ì•ˆì •ì ì¸ ê²½ì˜ì„ ì§€ì›í•©ë‹ˆë‹¤</p>
            </div>

            <form class="form-body" id="companyForm" onsubmit="return false;">
                <!-- ê¸°ì—… ê¸°ë³¸ ì •ë³´ -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">ğŸ¢</div>
                        <div class="section-title">
                            <h3>ê¸°ì—… ê¸°ë³¸ ì •ë³´</h3>
                            <p>íšŒì‚¬ì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                íšŒì‚¬ëª…<span class="required-mark">*</span>
                            </label>
                            <input type="text" class="form-input" id="company_name" name="company_name"
                                   placeholder="ì˜ˆ: ëŒ€í•œì •ë°€ì£¼ì‹íšŒì‚¬" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                ì œì¡°ì—…ì¢…<span class="required-mark">*</span>
                            </label>
                            <select class="form-input form-select" id="industry_code" name="industry_code" required>
                                <option value="">ì—…ì¢…ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="ìë™ì°¨ë¶€í’ˆì œì¡°ì—…">ğŸš— ìë™ì°¨ë¶€í’ˆì œì¡°ì—…</option>
                                <option value="í™”í•™ì œí’ˆì œì¡°ì—…">âš—ï¸ í™”í•™ì œí’ˆì œì¡°ì—…</option>
                                <option value="ì„¬ìœ ì œì¡°ì—…">ğŸ§µ ì„¬ìœ ì œì¡°ì—…</option>
                                <option value="ê¸°ê³„ì¥ë¹„ì œì¡°ì—…">âš™ï¸ ê¸°ê³„ì¥ë¹„ì œì¡°ì—…</option>
                                <option value="ê¸ˆì†ê°€ê³µì œí’ˆì œì¡°ì—…">ğŸ”§ ê¸ˆì†ê°€ê³µì œí’ˆì œì¡°ì—…</option>
                                <option value="í”Œë¼ìŠ¤í‹±ì œí’ˆì œì¡°ì—…">â™»ï¸ í”Œë¼ìŠ¤í‹±ì œí’ˆì œì¡°ì—…</option>
                                <option value="ì „ìë¶€í’ˆì œì¡°ì—…">ğŸ’¾ ì „ìë¶€í’ˆì œì¡°ì—…</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                ì†Œì¬ì§€<span class="required-mark">*</span>
                            </label>
                            <input type="text" class="form-input" id="location" name="location"
                                   placeholder="ì˜ˆ: ê²½ê¸°ë„ í™”ì„±ì‹œ" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                ì§ì› ìˆ˜ (ëª…)<span class="required-mark">*</span>
                            </label>
                            <input type="number" class="form-input" id="employee_count" name="employee_count"
                                   placeholder="120" min="1" max="1000" required>
                        </div>
                    </div>
                </div>

                <!-- ì¬ë¬´ í˜„í™© -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">ğŸ’°</div>
                        <div class="section-title">
                            <h3>ì¬ë¬´ í˜„í™©</h3>
                            <p>ìµœê·¼ ì¬ë¬´ ìƒíƒœë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                ì—°ë§¤ì¶œ (ì–µì›)<span class="required-mark">*</span>
                            </label>
                            <input type="number" class="form-input" id="annual_revenue" name="annual_revenue"
                                   placeholder="300" min="1" max="10000" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                ì´ ë¶€ì±„ (ì–µì›)
                            </label>
                            <input type="number" class="form-input" id="total_debt" name="total_debt"
                                   placeholder="100" min="0" max="10000">
                        </div>
                    </div>

                    <div class="range-container">
                        <div class="range-header">
                            <label class="form-label">ë³€ë™ê¸ˆë¦¬ ëŒ€ì¶œ ë¹„ì¤‘</label>
                            <div class="range-value" id="variable_debt_display">70%</div>
                        </div>
                        <input type="range" class="range-slider" id="variable_debt_ratio" name="variable_debt_ratio"
                               min="0" max="100" value="70" oninput="document.getElementById('variable_debt_display').textContent = this.value + '%'; console.log('ë³€ë™ê¸ˆë¦¬ ë³€ê²½:', this.value);">
                        <div class="range-info">
                            <span>0% (ì•ˆì •)</span>
                            <span>100% (ê³ ìœ„í—˜)</span>
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ì—… íŠ¹ì„± -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">ğŸŒ</div>
                        <div class="section-title">
                            <h3>ì‚¬ì—… íŠ¹ì„±</h3>
                            <p>ìˆ˜ì¶œ ë¹„ì¤‘ì„ ì„¤ì •í•´ì£¼ì„¸ìš”</p>
                        </div>
                    </div>

                    <div class="range-container">
                        <div class="range-header">
                            <label class="form-label">ìˆ˜ì¶œ ë¹„ì¤‘</label>
                            <div class="range-value" id="export_display">20%</div>
                        </div>
                        <input type="range" class="range-slider" id="export_ratio" name="export_ratio"
                               min="0" max="100" value="20" oninput="document.getElementById('export_display').textContent = this.value + '%'; console.log('ìˆ˜ì¶œë¹„ì¤‘ ë³€ê²½:', this.value);">
                        <div class="range-info">
                            <span>ë‚´ìˆ˜ ì¤‘ì‹¬</span>
                            <span>ìˆ˜ì¶œ ì¤‘ì‹¬</span>
                        </div>
                    </div>

                    <!-- ì›ìì¬ ì˜ì¡´ë„ ì„¤ì • -->
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                ì£¼ìš” ì›ìì¬ ì˜ì¡´ë„
                            </label>
                            <div style="background: rgba(255, 204, 0, 0.05); padding: 15px; border-radius: 8px; margin-top: 8px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="ì² ê°•ê°€ê²©ì§€ìˆ˜" style="margin-right: 8px;">
                                        ğŸ”© ì² ê°• (ìë™ì°¨/ê¸°ê³„)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="ì•Œë£¨ë¯¸ëŠ„ì„ ë¬¼ê°€ê²©" style="margin-right: 8px;">
                                        âš¡ ì•Œë£¨ë¯¸ëŠ„ (ê²½ëŸ‰ì†Œì¬)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="ì„ìœ í™”í•™ê°€ê²©ì§€ìˆ˜" style="margin-right: 8px;">
                                        ğŸ§ª ì„ìœ í™”í•™ (í”Œë¼ìŠ¤í‹±)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="ë¹„ì² ê¸ˆì†ê°€ê²©ì§€ìˆ˜" style="margin-right: 8px;">
                                        ğŸ’ ë¹„ì² ê¸ˆì† (ì „ìë¶€í’ˆ)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="ë°˜ë„ì²´ì†Œì¬ê°€ê²©ì§€ìˆ˜" style="margin-right: 8px;">
                                        ğŸ’¾ ë°˜ë„ì²´ì†Œì¬ (ITë¶€í’ˆ)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="ì„¬ìœ ì›ë£Œê°€ê²©ì§€ìˆ˜" style="margin-right: 8px;">
                                        ğŸ§µ ì„¬ìœ ì›ë£Œ (ì˜ë¥˜/í…ìŠ¤íƒ€ì¼)
                                    </label>
                                </div>
                                <p style="font-size: 0.8em; color: #666; margin-top: 10px;">
                                    * ì£¼ìš” ì›ìì¬ë¥¼ ì„ íƒí•˜ë©´ ë” ì •í™•í•œ ë¦¬ìŠ¤í¬ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì•Œë¦¼ ì„¤ì • -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">ğŸ””</div>
                        <div class="section-title">
                            <h3>ì•Œë¦¼ ì„¤ì •</h3>
                            <p>ë¦¬ìŠ¤í¬ ì•Œë¦¼ì„ ë°›ì„ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                ì•Œë¦¼ ì´ë©”ì¼<span class="required-mark">*</span>
                            </label>
                            <input type="email" class="form-input" id="notification_email" name="notification_email"
                                   placeholder="ceo@company.com" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ì•Œë¦¼ ìˆ˜ì¤€</label>
                            <select class="form-input form-select" id="risk_threshold" name="risk_threshold">
                                <option value="high">ğŸ”´ HIGH ë¦¬ìŠ¤í¬ë§Œ (ê¸´ê¸‰)</option>
                                <option value="medium" selected>ğŸŸ¡ MEDIUM ì´ìƒ (ê¶Œì¥)</option>
                                <option value="low">ğŸŸ¢ ëª¨ë“  ë¦¬ìŠ¤í¬</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- ì œì¶œ ì„¹ì…˜ -->
                <div class="submit-section">
                    <div style="text-align: center;">
                        <button type="button" class="submit-btn" id="submitBtn" onclick="
                            console.log('ğŸš€ í¼ ì œì¶œ ì‹œì‘');

                            const submitBtn = document.getElementById('submitBtn');
                            submitBtn.disabled = true;
                            submitBtn.innerHTML = '<span>ğŸ”„ AI ë¶„ì„ ì¤‘...</span>';

                            const form = document.getElementById('companyForm');
                            const formData = new FormData(form);
                            const data = {};

                            // ì²´í¬ë°•ìŠ¤ ë°ì´í„° ì²˜ë¦¬ (ì›ìì¬)
                            const rawMaterials = [];

                            for (let [key, value] of formData.entries()) {
                                if (key === 'raw_materials') {
                                    rawMaterials.push(value);
                                } else {
                                    data[key] = value;
                                }
                            }

                            // ì›ìì¬ ë°°ì—´ ì¶”ê°€
                            data.raw_materials = rawMaterials;

                            if (data.annual_revenue) data.annual_revenue = parseFloat(data.annual_revenue);
                            if (data.employee_count) data.employee_count = parseInt(data.employee_count);
                            if (data.total_debt) data.total_debt = parseFloat(data.total_debt) || 0;
                            if (data.variable_debt_ratio) data.variable_debt_ratio = parseFloat(data.variable_debt_ratio);
                            if (data.export_ratio) data.export_ratio = parseFloat(data.export_ratio);

                            console.log('ğŸ“¤ ì „ì†¡í•  ë°ì´í„°:', data);

                            fetch('/api/register_company', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify(data)
                            })
                            .then(response => response.json())
                            .then(result => {
                                console.log('âœ… ì„œë²„ ì‘ë‹µ:', result);
                                if (result.success) {
                                    alert('âœ… ê¸°ì—… ë“±ë¡ ì™„ë£Œ! ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                                    // êµ¬ì¡°í™”ëœ ë¶„ì„ ê²°ê³¼ë¥¼ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
                                    const analysisData = {
                                        ...result,
                                        analysis_results: result.analysis_results || {},
                                        confidence_score: result.confidence_score || 0.8
                                    };
                                    sessionStorage.setItem('analysisResult', JSON.stringify(analysisData));
                                    window.location.href = '/analysis-result?company_name=' + encodeURIComponent(result.company_name) + '&success=true';
                                } else {
                                    alert('âŒ ë“±ë¡ ì‹¤íŒ¨: ' + (result.error || result.detail));
                                }
                            })
                            .catch(error => {
                                console.error('âŒ ì˜¤ë¥˜:', error);
                                alert('âŒ ì„œë²„ ì˜¤ë¥˜: ' + error);
                            })
                            .finally(() => {
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = 'ğŸš€ AI ë¦¬ìŠ¤í¬ ë¶„ì„ ì‹œì‘í•˜ê¸°';
                            });
                        " style="background: #FFCC00; color: #1A1A1A; border: none; padding: 20px 40px; font-size: 18px; font-weight: bold; border-radius: 25px; cursor: pointer;">
                            ğŸš€ AI ë¦¬ìŠ¤í¬ ë¶„ì„ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>
                    <div class="submit-info">
                        ë“±ë¡ ì¦‰ì‹œ AIê°€ ê·€ì‚¬ì˜ ë¦¬ìŠ¤í¬ë¥¼ ë¶„ì„í•˜ì—¬<br>
                        ë§ì¶¤í˜• ê¸ˆìœµ ë¦¬ìŠ¤í¬ ëŒ€ì‹œë³´ë“œë¥¼ ìƒì„±í•´ë“œë¦½ë‹ˆë‹¤
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì•Œë¦¼ -->
    <div class="toast toast-success" id="toast">
        <div class="toast-icon">âœ“</div>
        <div class="toast-content">
            <h4>ë“±ë¡ ì™„ë£Œ!</h4>
            <p>AI ë¶„ì„ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤</p>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
        let variableDebtSlider, variableDebtDisplay, exportSlider, exportDisplay;
        let currentStep = 1;
        const totalSteps = 4;


        // í¼ ì œì¶œ í•¨ìˆ˜ (ì¸ë¼ì¸ìš©)
        function submitFormDirectly() {
            console.log('ğŸš€ í¼ ì œì¶œ ì‹œì‘');

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>ğŸ”„ AI ë¶„ì„ ì¤‘...</span>';

            // í¼ ë°ì´í„° ìˆ˜ì§‘
            const form = document.getElementById('companyForm');
            const formData = new FormData(form);
            const data = {};

            // FormDataë¥¼ JSONìœ¼ë¡œ ë³€í™˜
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }

            // ìˆ«ì í•„ë“œ ë³€í™˜
            if (data.annual_revenue) data.annual_revenue = parseFloat(data.annual_revenue);
            if (data.employee_count) data.employee_count = parseInt(data.employee_count);
            if (data.total_debt) data.total_debt = parseFloat(data.total_debt) || 0;
            if (data.variable_debt_ratio) data.variable_debt_ratio = parseFloat(data.variable_debt_ratio);
            if (data.export_ratio) data.export_ratio = parseFloat(data.export_ratio);

            console.log('ğŸ“¤ ì „ì†¡í•  ë°ì´í„°:', data);

            // ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡
            fetch('/api/register_company', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                console.log('âœ… ì„œë²„ ì‘ë‹µ:', result);
                if (result.success) {
                    alert('âœ… ê¸°ì—… ë“±ë¡ ì™„ë£Œ!\n\në¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                    // ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
                    window.location.href = `/analysis-result?company_name=${encodeURIComponent(result.company_name)}&success=true`;
                } else {
                    alert('âŒ ë“±ë¡ ì‹¤íŒ¨: ' + (result.error || result.detail));
                }
            })
            .catch(error => {
                console.error('âŒ ì˜¤ë¥˜:', error);
                alert('âŒ ì„œë²„ ì˜¤ë¥˜: ' + error);
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>ğŸš€ AI ë¦¬ìŠ¤í¬ ë¶„ì„ ì‹œì‘í•˜ê¸°</span>';
            });
        }

        // ê°•ì œ ìŠ¬ë¼ì´ë” ì‘ë™ ì½”ë“œ - í˜ì´ì§€ ë¡œë“œ ì¦‰ì‹œ
        window.onload = function() {
            // 3ì´ˆ í›„ ìŠ¬ë¼ì´ë” ê°•ì œ ì—°ê²°
            setTimeout(function() {
                const variableSlider = document.getElementById('variable_debt_ratio');
                const variableDisplay = document.getElementById('variable_debt_display');
                const exportSlider = document.getElementById('export_ratio');
                const exportDisplay = document.getElementById('export_display');

                if (variableSlider && variableDisplay) {
                    variableSlider.oninput = function() {
                        variableDisplay.textContent = this.value + '%';
                        console.log('ë³€ë™ê¸ˆë¦¬:', this.value);
                    };
                }

                if (exportSlider && exportDisplay) {
                    exportSlider.oninput = function() {
                        exportDisplay.textContent = this.value + '%';
                        console.log('ìˆ˜ì¶œë¹„ì¤‘:', this.value);
                    };
                }

                console.log('ìŠ¬ë¼ì´ë” ê°•ì œ ì—°ê²° ì™„ë£Œ');
            }, 3000);
        };

        // DOM ë¡œë“œ ì™„ë£Œ í›„ ëª¨ë“  ì´ˆê¸°í™” (í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì—ì„œ ê²€ì¦ëœ ì½”ë“œ)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ DOM ë¡œë“œ ì™„ë£Œ, ì´ˆê¸°í™” ì‹œì‘');

            // íŒŒí‹°í´ ì• ë‹ˆë©”ì´ì…˜
            createParticles();

            // ìŠ¬ë¼ì´ë” ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
            variableDebtSlider = document.getElementById('variable_debt_ratio');
            variableDebtDisplay = document.getElementById('variable_debt_display');
            exportSlider = document.getElementById('export_ratio');
            exportDisplay = document.getElementById('export_display');

            console.log('ìŠ¬ë¼ì´ë” ìš”ì†Œ í™•ì¸:');
            console.log('variableDebtSlider:', variableDebtSlider);
            console.log('variableDebtDisplay:', variableDebtDisplay);
            console.log('exportSlider:', exportSlider);
            console.log('exportDisplay:', exportDisplay);

            // ë³€ë™ê¸ˆë¦¬ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì™€ ë™ì¼í•œ ì½”ë“œ)
            if (variableDebtSlider && variableDebtDisplay) {
                variableDebtSlider.addEventListener('input', function(e) {
                    const value = e.target.value;
                    console.log('âœ… ë³€ë™ê¸ˆë¦¬ ìŠ¬ë¼ì´ë” ë³€ê²½:', value + '%');
                    variableDebtDisplay.textContent = value + '%';
                    updateRiskIndicators();
                });
                console.log('âœ… ë³€ë™ê¸ˆë¦¬ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
            } else {
                console.error('âŒ ë³€ë™ê¸ˆë¦¬ ìŠ¬ë¼ì´ë” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }

            // ìˆ˜ì¶œë¹„ì¤‘ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì™€ ë™ì¼í•œ ì½”ë“œ)
            if (exportSlider && exportDisplay) {
                exportSlider.addEventListener('input', function(e) {
                    const value = e.target.value;
                    console.log('âœ… ìˆ˜ì¶œë¹„ì¤‘ ìŠ¬ë¼ì´ë” ë³€ê²½:', value + '%');
                    exportDisplay.textContent = value + '%';
                    updateRiskIndicators();
                });
                console.log('âœ… ìˆ˜ì¶œë¹„ì¤‘ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
            } else {
                console.error('âŒ ìˆ˜ì¶œë¹„ì¤‘ ìŠ¬ë¼ì´ë” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }

            // ì œì¶œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.addEventListener('click', handleFormSubmit);
                console.log('âœ… ì œì¶œ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
            }

            // ì…ë ¥ í•„ë“œ ëª¨ë‹ˆí„°ë§
            document.querySelectorAll('input, select').forEach(field => {
                field.addEventListener('input', updateProgress);
                field.addEventListener('change', updateProgress);
            });

            // ì´ˆê¸° ìƒíƒœ ì„¤ì •
            updateRiskIndicators();
            updateProgress();

            console.log('ğŸ‰ ëª¨ë“  ì´ˆê¸°í™” ì™„ë£Œ! ìŠ¬ë¼ì´ë”ë¥¼ ë“œë˜ê·¸í•´ë³´ì„¸ìš”!');
        });

        // íŒŒí‹°í´ ì• ë‹ˆë©”ì´ì…˜
        function createParticles() {
            const container = document.getElementById('particles');
            if (!container) return;

            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // ë¦¬ìŠ¤í¬ ì¸ë””ì¼€ì´í„° ì—…ë°ì´íŠ¸ (í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì—ì„œ ê²€ì¦ëœ ì½”ë“œ)
        function updateRiskIndicators() {
            if (!variableDebtSlider || !exportSlider) {
                console.log('ìŠ¬ë¼ì´ë” ìš”ì†Œê°€ ì—†ì–´ì„œ ë¦¬ìŠ¤í¬ ì—…ë°ì´íŠ¸ ê±´ë„ˆëœ€');
                return;
            }

            const variableDebt = parseInt(variableDebtSlider.value);
            const exportRatio = parseInt(exportSlider.value);

            console.log('ğŸ“Š ë¦¬ìŠ¤í¬ ì¸ë””ì¼€ì´í„° ì—…ë°ì´íŠ¸: ë³€ë™ê¸ˆë¦¬=' + variableDebt + '%, ìˆ˜ì¶œ=' + exportRatio + '%');

            // ê¸ˆë¦¬ ë¦¬ìŠ¤í¬
            const interestRisk = document.getElementById('interest-risk');
            if (interestRisk) {
                if (variableDebt > 70) {
                    interestRisk.textContent = 'ë†’ìŒ';
                    interestRisk.style.color = '#FF3366';
                } else if (variableDebt > 40) {
                    interestRisk.textContent = 'ì¤‘ê°„';
                    interestRisk.style.color = '#FF6B35';
                } else {
                    interestRisk.textContent = 'ë‚®ìŒ';
                    interestRisk.style.color = '#00C896';
                }
                console.log('ê¸ˆë¦¬ ë¦¬ìŠ¤í¬ ì—…ë°ì´íŠ¸:', interestRisk.textContent);
            }

            // í™˜ìœ¨ ë¦¬ìŠ¤í¬
            const exchangeRisk = document.getElementById('exchange-risk');
            if (exchangeRisk) {
                if (exportRatio > 60) {
                    exchangeRisk.textContent = 'ë†’ìŒ';
                    exchangeRisk.style.color = '#FF3366';
                } else if (exportRatio > 30) {
                    exchangeRisk.textContent = 'ì¤‘ê°„';
                    exchangeRisk.style.color = '#FF6B35';
                } else {
                    exchangeRisk.textContent = 'ë‚®ìŒ';
                    exchangeRisk.style.color = '#00C896';
                }
                console.log('í™˜ìœ¨ ë¦¬ìŠ¤í¬ ì—…ë°ì´íŠ¸:', exchangeRisk.textContent);
            }

            // ì´ ë¦¬ìŠ¤í¬
            const totalRisk = document.getElementById('total-risk');
            if (totalRisk) {
                const avgRisk = (variableDebt + exportRatio) / 2;
                if (avgRisk > 60) {
                    totalRisk.textContent = 'ì£¼ì˜ í•„ìš”';
                    totalRisk.style.color = '#FF3366';
                } else if (avgRisk > 40) {
                    totalRisk.textContent = 'ëª¨ë‹ˆí„°ë§';
                    totalRisk.style.color = '#FF6B35';
                } else {
                    totalRisk.textContent = 'ì–‘í˜¸';
                    totalRisk.style.color = '#00C896';
                }
                console.log('ì´ ë¦¬ìŠ¤í¬ ì—…ë°ì´íŠ¸:', totalRisk.textContent);
            }
        }

        // í”„ë¡œê·¸ë ˆìŠ¤ ì—…ë°ì´íŠ¸ (ë””ë²„ê¹… ì¶”ê°€)
        function updateProgress() {
            const filled = document.querySelectorAll('.form-section input:valid, .form-section select:valid').length;
            const total = document.querySelectorAll('.form-section input[required], .form-section select[required]').length;
            const progress = (filled / total) * 100;

            console.log(`ğŸ“Š í”„ë¡œê·¸ë ˆìŠ¤ ì—…ë°ì´íŠ¸: ${filled}/${total} = ${progress.toFixed(1)}%`);

            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = progress + '%';
                console.log(`âœ… í”„ë¡œê·¸ë ˆìŠ¤ ë°” ë„ˆë¹„ ì„¤ì •: ${progress.toFixed(1)}%`);
            } else {
                console.error('âŒ progressFill ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }

            // ìŠ¤í… ì—…ë°ì´íŠ¸
            const newStep = Math.min(Math.floor(progress / 25) + 1, totalSteps);
            if (newStep !== currentStep) {
                currentStep = newStep;
                console.log(`ğŸ”„ ìŠ¤í… ë³€ê²½: ${currentStep} -> ${newStep}`);
                updateSteps();
            }
        }

        function updateSteps() {
            document.querySelectorAll('.step').forEach((step, index) => {
                if (index < currentStep - 1) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (index === currentStep - 1) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
        }

        // í¼ ì œì¶œ ì²˜ë¦¬
        function handleFormSubmit(e) {
            e.preventDefault();
            console.log('í¼ ì œì¶œ ì‹œì‘');

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>ğŸ”„ AI ë¶„ì„ ì¤‘...</span>';

            // í¼ ë°ì´í„° ìˆ˜ì§‘
            const form = document.getElementById('companyForm');
            const formData = new FormData(form);
            const data = {};

            // FormDataë¥¼ JSONìœ¼ë¡œ ë³€í™˜ (ì²´í¬ë°•ìŠ¤ ì²˜ë¦¬ í¬í•¨)
            const rawMaterials = [];

            for (let [key, value] of formData.entries()) {
                if (key === 'raw_materials') {
                    rawMaterials.push(value);
                } else {
                    data[key] = value;
                }
            }

            // ì›ìì¬ ë°°ì—´ ì¶”ê°€
            data.raw_materials = rawMaterials;

            // ìˆ«ì í•„ë“œ ë³€í™˜
            if (data.annual_revenue) data.annual_revenue = parseFloat(data.annual_revenue);
            if (data.employee_count) data.employee_count = parseInt(data.employee_count);
            if (data.total_debt) data.total_debt = parseFloat(data.total_debt) || 0;
            if (data.variable_debt_ratio) data.variable_debt_ratio = parseFloat(data.variable_debt_ratio);
            if (data.export_ratio) data.export_ratio = parseFloat(data.export_ratio);

            console.log('í¼ ë°ì´í„°:', data);

            // ì‹¤ì œ ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡
            fetch('/api/register_company', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                console.log('ì„œë²„ ì‘ë‹µ:', result);
                if (result.success) {
                    // ë¶„ì„ ê²°ê³¼ë¥¼ sessionStorageì— ì €ì¥
                    const analysisData = {
                        ...result,
                        analysis_results: result.analysis_results || {},
                        confidence_score: result.confidence_score || 0.8
                    };
                    sessionStorage.setItem('analysisResult', JSON.stringify(analysisData));
                    console.log('ë¶„ì„ ê²°ê³¼ sessionStorage ì €ì¥ ì™„ë£Œ:', analysisData);

                    // ì™„ë£Œ ì• ë‹ˆë©”ì´ì…˜
                    document.querySelectorAll('.step').forEach(step => {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    });
                    const progressFill = document.getElementById('progressFill');
                    if (progressFill) {
                        progressFill.style.width = '100%';
                    }

                    // ì™„ë£Œ ì• ë‹ˆë©”ì´ì…˜ í›„ ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
                    setTimeout(() => {
                        window.location.href = `/analysis-result?company_name=${encodeURIComponent(result.company_name)}&success=true&node_id=${result.node_id || ''}`;
                    }, 2000);

                } else {
                    alert('âŒ ë“±ë¡ ì‹¤íŒ¨: ' + (result.error || result.detail));
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('âŒ ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error);
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>ğŸš€ AI ë¦¬ìŠ¤í¬ ë¶„ì„ ì‹œì‘í•˜ê¸°</span>';
            });
        }
    </script>
</body>
</html>