<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KB Fortress AI - Smart Manufacturing Risk Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --kb-primary: #FFCC00;
            --kb-secondary: #785C00;
            --kb-dark: #1A1A1A;
            --kb-gray: #666666;
            --kb-light-gray: #F5F5F5;
            --kb-success: #00C896;
            --kb-warning: #FF6B35;
            --kb-danger: #FF3366;
            --kb-info: #3366FF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: #000;
            min-height: 100vh;
            overflow-x: hidden;
            color: #333;
        }

        /* 애니메이션 배경 */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0A0A0A 0%, #1A1A1A 100%);
            z-index: -2;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--kb-primary);
            border-radius: 50%;
            animation: float 20s infinite linear;
            box-shadow: 0 0 10px var(--kb-primary);
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(100px);
                opacity: 0;
            }
        }

        /* 네비게이션 */
        .nav-header {
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 204, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 20px 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--kb-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--kb-dark);
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(255, 204, 0, 0.5);
            }
        }

        .logo-text {
            color: white;
        }

        .logo-text h1 {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .logo-text p {
            font-size: 0.85em;
            color: var(--kb-primary);
            opacity: 0.9;
        }

        .nav-status {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 20px;
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid rgba(255, 204, 0, 0.3);
            border-radius: 25px;
            color: var(--kb-primary);
            font-size: 0.9em;
            animation: statusGlow 2s infinite;
        }

        @keyframes statusGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.2);
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 204, 0, 0.4);
            }
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--kb-success);
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.3;
            }
        }

        /* 메인 컨테이너 */
        .main-container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 0 20px;
        }

        /* 프로그레스 인디케이터 */
        .progress-indicator {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 204, 0, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255, 204, 0, 0.2);
            z-index: 0;
        }

        .progress-line-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, var(--kb-primary), var(--kb-warning));
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        .step {
            position: relative;
            z-index: 1;
            text-align: center;
            flex: 1;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            margin: 0 auto 10px;
            background: var(--kb-dark);
            border: 2px solid rgba(255, 204, 0, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--kb-gray);
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .step.active .step-circle {
            background: var(--kb-primary);
            color: var(--kb-dark);
            border-color: var(--kb-primary);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.5);
            animation: stepPulse 1.5s infinite;
        }

        @keyframes stepPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .step.completed .step-circle {
            background: var(--kb-success);
            border-color: var(--kb-success);
            color: white;
        }

        .step-label {
            color: var(--kb-gray);
            font-size: 0.85em;
            margin-top: 8px;
        }

        .step.active .step-label {
            color: var(--kb-primary);
            font-weight: 600;
        }

        /* 폼 카드 */
        .form-card {
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.6s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-header {
            background: linear-gradient(135deg, var(--kb-primary) 0%, #FFD633 100%);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .card-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 60%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(35deg);
        }

        .card-header h2 {
            font-size: 2em;
            color: var(--kb-dark);
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .card-header p {
            color: var(--kb-secondary);
            font-size: 1.1em;
            position: relative;
            z-index: 1;
        }

        .form-body {
            padding: 40px;
        }

        /* 섹션 스타일 */
        .form-section {
            margin-bottom: 35px;
            opacity: 0;
            animation: fadeInSection 0.6s ease forwards;
        }

        .form-section:nth-child(1) { animation-delay: 0.1s; }
        .form-section:nth-child(2) { animation-delay: 0.2s; }
        .form-section:nth-child(3) { animation-delay: 0.3s; }
        .form-section:nth-child(4) { animation-delay: 0.4s; }

        @keyframes fadeInSection {
            to {
                opacity: 1;
            }
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--kb-light-gray);
        }

        .section-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--kb-primary), #FFD633);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.3);
        }

        .section-title h3 {
            font-size: 1.3em;
            color: var(--kb-dark);
            margin-bottom: 4px;
        }

        .section-title p {
            font-size: 0.9em;
            color: var(--kb-gray);
        }

        /* 입력 필드 */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--kb-dark);
            font-size: 0.95em;
            transition: color 0.3s ease;
        }

        .required-mark {
            color: var(--kb-danger);
            margin-left: 4px;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--kb-primary);
            box-shadow: 0 0 0 4px rgba(255, 204, 0, 0.1);
            transform: translateY(-2px);
        }

        .form-input:hover {
            border-color: var(--kb-primary);
        }

        /* 셀렉트 스타일 */
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
        }

        /* 범위 슬라이더 */
        .range-container {
            margin-bottom: 25px;
        }

        .range-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .range-value {
            padding: 8px 16px;
            background: linear-gradient(135deg, var(--kb-primary), #FFD633);
            color: var(--kb-dark);
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.1em;
            min-width: 80px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(255, 204, 0, 0.3);
        }

        .range-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #E0E0E0;
            outline: none;
            -webkit-appearance: none;
            position: relative;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--kb-primary);
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .range-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 15px rgba(255, 204, 0, 0.4);
        }

        .range-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--kb-primary);
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .range-info {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.85em;
            color: var(--kb-gray);
        }

        /* 리스크 인디케이터 */
        .risk-indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background: var(--kb-light-gray);
            border-radius: 16px;
        }

        .risk-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .risk-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .risk-icon {
            width: 50px;
            height: 50px;
            margin: 0 auto 12px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .risk-low {
            background: rgba(0, 200, 150, 0.1);
            color: var(--kb-success);
        }

        .risk-medium {
            background: rgba(255, 204, 0, 0.1);
            color: var(--kb-warning);
        }

        .risk-high {
            background: rgba(255, 51, 102, 0.1);
            color: var(--kb-danger);
        }

        .risk-title {
            font-weight: 600;
            color: var(--kb-dark);
            margin-bottom: 4px;
        }

        .risk-status {
            font-size: 0.85em;
            color: var(--kb-gray);
        }

        /* 제출 섹션 */
        .submit-section {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 204, 0, 0.05), rgba(255, 214, 51, 0.05));
            border-radius: 16px;
            text-align: center;
            border: 2px solid rgba(255, 204, 0, 0.2);
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--kb-primary), #FFD633);
            color: var(--kb-dark);
            border: none;
            padding: 18px 50px;
            font-size: 1.1em;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 204, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .submit-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 204, 0, 0.5);
        }

        .submit-btn:active {
            transform: translateY(-1px);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .submit-info {
            margin-top: 20px;
            color: var(--kb-gray);
            font-size: 0.95em;
            line-height: 1.6;
        }

        /* 알림 토스트 */
        .toast {
            position: fixed;
            top: 100px;
            right: -400px;
            background: white;
            border-radius: 12px;
            padding: 20px 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 16px;
            transition: right 0.5s ease;
            z-index: 1000;
            max-width: 400px;
        }

        .toast.show {
            right: 20px;
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .toast-success .toast-icon {
            background: rgba(0, 200, 150, 0.1);
            color: var(--kb-success);
        }

        .toast-content h4 {
            margin-bottom: 4px;
            color: var(--kb-dark);
        }

        .toast-content p {
            color: var(--kb-gray);
            font-size: 0.9em;
        }

        /* 반응형 */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .risk-indicators {
                grid-template-columns: 1fr;
            }

            .card-header {
                padding: 30px 20px;
            }

            .form-body {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- 애니메이션 배경 -->
    <div class="animated-bg"></div>
    <div class="particles" id="particles"></div>

    <!-- 네비게이션 -->
    <nav class="nav-header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">KB</div>
                <div class="logo-text">
                    <h1>Fortress AI</h1>
                    <p>Smart Manufacturing Risk Management</p>
                </div>
            </div>
            <div class="nav-status">
                <span class="status-dot"></span>
                <span>실시간 모니터링 중</span>
            </div>
        </div>
    </nav>

    <!-- 메인 컨테이너 -->
    <div class="main-container">
        <!-- 프로그레스 인디케이터 -->
        <div class="progress-indicator">
            <div class="progress-steps">
                <div class="progress-line">
                    <div class="progress-line-fill" id="progressFill"></div>
                </div>
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">기업 정보</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">재무 현황</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">사업 특성</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-label">알림 설정</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-circle">✓</div>
                    <div class="step-label">완료</div>
                </div>
            </div>
        </div>

        <!-- 폼 카드 -->
        <div class="form-card">
            <div class="card-header">
                <h2>🚀 제조업 리스크 관리 시작하기</h2>
                <p>AI 기반 실시간 금융 리스크 모니터링으로 안정적인 경영을 지원합니다</p>
            </div>

            <form class="form-body" id="companyForm" onsubmit="return false;">
                <!-- 기업 기본 정보 -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">🏢</div>
                        <div class="section-title">
                            <h3>기업 기본 정보</h3>
                            <p>회사의 기본 정보를 입력해주세요</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                회사명<span class="required-mark">*</span>
                            </label>
                            <input type="text" class="form-input" id="company_name" name="company_name"
                                   placeholder="예: 대한정밀주식회사" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                제조업종<span class="required-mark">*</span>
                            </label>
                            <select class="form-input form-select" id="industry_code" name="industry_code" required>
                                <option value="">업종을 선택하세요</option>
                                <option value="자동차부품제조업">🚗 자동차부품제조업</option>
                                <option value="화학제품제조업">⚗️ 화학제품제조업</option>
                                <option value="섬유제조업">🧵 섬유제조업</option>
                                <option value="기계장비제조업">⚙️ 기계장비제조업</option>
                                <option value="금속가공제품제조업">🔧 금속가공제품제조업</option>
                                <option value="플라스틱제품제조업">♻️ 플라스틱제품제조업</option>
                                <option value="전자부품제조업">💾 전자부품제조업</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                소재지<span class="required-mark">*</span>
                            </label>
                            <input type="text" class="form-input" id="location" name="location"
                                   placeholder="예: 경기도 화성시" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                직원 수 (명)<span class="required-mark">*</span>
                            </label>
                            <input type="number" class="form-input" id="employee_count" name="employee_count"
                                   placeholder="120" min="1" max="1000" required>
                        </div>
                    </div>
                </div>

                <!-- 재무 현황 -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">💰</div>
                        <div class="section-title">
                            <h3>재무 현황</h3>
                            <p>최근 재무 상태를 입력해주세요</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                연매출 (억원)<span class="required-mark">*</span>
                            </label>
                            <input type="number" class="form-input" id="annual_revenue" name="annual_revenue"
                                   placeholder="300" min="1" max="10000" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                총 부채 (억원)
                            </label>
                            <input type="number" class="form-input" id="total_debt" name="total_debt"
                                   placeholder="100" min="0" max="10000">
                        </div>
                    </div>

                    <div class="range-container">
                        <div class="range-header">
                            <label class="form-label">변동금리 대출 비중</label>
                            <div class="range-value" id="variable_debt_display">70%</div>
                        </div>
                        <input type="range" class="range-slider" id="variable_debt_ratio" name="variable_debt_ratio"
                               min="0" max="100" value="70" oninput="document.getElementById('variable_debt_display').textContent = this.value + '%'; console.log('변동금리 변경:', this.value);">
                        <div class="range-info">
                            <span>0% (안정)</span>
                            <span>100% (고위험)</span>
                        </div>
                    </div>
                </div>

                <!-- 사업 특성 -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">🌍</div>
                        <div class="section-title">
                            <h3>사업 특성</h3>
                            <p>수출 비중을 설정해주세요</p>
                        </div>
                    </div>

                    <div class="range-container">
                        <div class="range-header">
                            <label class="form-label">수출 비중</label>
                            <div class="range-value" id="export_display">20%</div>
                        </div>
                        <input type="range" class="range-slider" id="export_ratio" name="export_ratio"
                               min="0" max="100" value="20" oninput="document.getElementById('export_display').textContent = this.value + '%'; console.log('수출비중 변경:', this.value);">
                        <div class="range-info">
                            <span>내수 중심</span>
                            <span>수출 중심</span>
                        </div>
                    </div>

                    <!-- 원자재 의존도 설정 -->
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                주요 원자재 의존도
                            </label>
                            <div style="background: rgba(255, 204, 0, 0.05); padding: 15px; border-radius: 8px; margin-top: 8px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="철강가격지수" style="margin-right: 8px;">
                                        🔩 철강 (자동차/기계)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="알루미늄선물가격" style="margin-right: 8px;">
                                        ⚡ 알루미늄 (경량소재)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="석유화학가격지수" style="margin-right: 8px;">
                                        🧪 석유화학 (플라스틱)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="비철금속가격지수" style="margin-right: 8px;">
                                        💎 비철금속 (전자부품)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="반도체소재가격지수" style="margin-right: 8px;">
                                        💾 반도체소재 (IT부품)
                                    </label>
                                    <label style="display: flex; align-items: center; font-size: 0.9em;">
                                        <input type="checkbox" name="raw_materials" value="섬유원료가격지수" style="margin-right: 8px;">
                                        🧵 섬유원료 (의류/텍스타일)
                                    </label>
                                </div>
                                <p style="font-size: 0.8em; color: #666; margin-top: 10px;">
                                    * 주요 원자재를 선택하면 더 정확한 리스크 분석이 가능합니다
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 알림 설정 -->
                <div class="form-section">
                    <div class="section-header">
                        <div class="section-icon">🔔</div>
                        <div class="section-title">
                            <h3>알림 설정</h3>
                            <p>리스크 알림을 받을 연락처를 입력해주세요</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                알림 이메일<span class="required-mark">*</span>
                            </label>
                            <input type="email" class="form-input" id="notification_email" name="notification_email"
                                   placeholder="ceo@company.com" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">알림 수준</label>
                            <select class="form-input form-select" id="risk_threshold" name="risk_threshold">
                                <option value="high">🔴 HIGH 리스크만 (긴급)</option>
                                <option value="medium" selected>🟡 MEDIUM 이상 (권장)</option>
                                <option value="low">🟢 모든 리스크</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 제출 섹션 -->
                <div class="submit-section">
                    <div style="text-align: center;">
                        <button type="button" class="submit-btn" id="submitBtn" onclick="
                            console.log('🚀 폼 제출 시작');

                            const submitBtn = document.getElementById('submitBtn');
                            submitBtn.disabled = true;
                            submitBtn.innerHTML = '<span>🔄 AI 분석 중...</span>';

                            const form = document.getElementById('companyForm');
                            const formData = new FormData(form);
                            const data = {};

                            // 체크박스 데이터 처리 (원자재)
                            const rawMaterials = [];

                            for (let [key, value] of formData.entries()) {
                                if (key === 'raw_materials') {
                                    rawMaterials.push(value);
                                } else {
                                    data[key] = value;
                                }
                            }

                            // 원자재 배열 추가
                            data.raw_materials = rawMaterials;

                            if (data.annual_revenue) data.annual_revenue = parseFloat(data.annual_revenue);
                            if (data.employee_count) data.employee_count = parseInt(data.employee_count);
                            if (data.total_debt) data.total_debt = parseFloat(data.total_debt) || 0;
                            if (data.variable_debt_ratio) data.variable_debt_ratio = parseFloat(data.variable_debt_ratio);
                            if (data.export_ratio) data.export_ratio = parseFloat(data.export_ratio);

                            console.log('📤 전송할 데이터:', data);

                            fetch('/api/register_company', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify(data)
                            })
                            .then(response => response.json())
                            .then(result => {
                                console.log('✅ 서버 응답:', result);
                                if (result.success) {
                                    alert('✅ 기업 등록 완료! 분석 결과를 확인하세요.');
                                    // 구조화된 분석 결과를 세션 스토리지에 저장
                                    const analysisData = {
                                        ...result,
                                        analysis_results: result.analysis_results || {},
                                        confidence_score: result.confidence_score || 0.8
                                    };
                                    sessionStorage.setItem('analysisResult', JSON.stringify(analysisData));
                                    window.location.href = '/analysis-result?company_name=' + encodeURIComponent(result.company_name) + '&success=true';
                                } else {
                                    alert('❌ 등록 실패: ' + (result.error || result.detail));
                                }
                            })
                            .catch(error => {
                                console.error('❌ 오류:', error);
                                alert('❌ 서버 오류: ' + error);
                            })
                            .finally(() => {
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = '🚀 AI 리스크 분석 시작하기';
                            });
                        " style="background: #FFCC00; color: #1A1A1A; border: none; padding: 20px 40px; font-size: 18px; font-weight: bold; border-radius: 25px; cursor: pointer;">
                            🚀 AI 리스크 분석 시작하기
                        </button>
                    </div>
                    <div class="submit-info">
                        등록 즉시 AI가 귀사의 리스크를 분석하여<br>
                        맞춤형 금융 리스크 대시보드를 생성해드립니다
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- 토스트 알림 -->
    <div class="toast toast-success" id="toast">
        <div class="toast-icon">✓</div>
        <div class="toast-content">
            <h4>등록 완료!</h4>
            <p>AI 분석이 시작되었습니다</p>
        </div>
    </div>

    <script>
        // 전역 변수 선언
        let variableDebtSlider, variableDebtDisplay, exportSlider, exportDisplay;
        let currentStep = 1;
        const totalSteps = 4;


        // 폼 제출 함수 (인라인용)
        function submitFormDirectly() {
            console.log('🚀 폼 제출 시작');

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>🔄 AI 분석 중...</span>';

            // 폼 데이터 수집
            const form = document.getElementById('companyForm');
            const formData = new FormData(form);
            const data = {};

            // FormData를 JSON으로 변환
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }

            // 숫자 필드 변환
            if (data.annual_revenue) data.annual_revenue = parseFloat(data.annual_revenue);
            if (data.employee_count) data.employee_count = parseInt(data.employee_count);
            if (data.total_debt) data.total_debt = parseFloat(data.total_debt) || 0;
            if (data.variable_debt_ratio) data.variable_debt_ratio = parseFloat(data.variable_debt_ratio);
            if (data.export_ratio) data.export_ratio = parseFloat(data.export_ratio);

            console.log('📤 전송할 데이터:', data);

            // 서버로 데이터 전송
            fetch('/api/register_company', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                console.log('✅ 서버 응답:', result);
                if (result.success) {
                    alert('✅ 기업 등록 완료!\n\n분석 결과를 확인하세요.');
                    // 결과 페이지로 이동
                    window.location.href = `/analysis-result?company_name=${encodeURIComponent(result.company_name)}&success=true`;
                } else {
                    alert('❌ 등록 실패: ' + (result.error || result.detail));
                }
            })
            .catch(error => {
                console.error('❌ 오류:', error);
                alert('❌ 서버 오류: ' + error);
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>🚀 AI 리스크 분석 시작하기</span>';
            });
        }

        // 강제 슬라이더 작동 코드 - 페이지 로드 즉시
        window.onload = function() {
            // 3초 후 슬라이더 강제 연결
            setTimeout(function() {
                const variableSlider = document.getElementById('variable_debt_ratio');
                const variableDisplay = document.getElementById('variable_debt_display');
                const exportSlider = document.getElementById('export_ratio');
                const exportDisplay = document.getElementById('export_display');

                if (variableSlider && variableDisplay) {
                    variableSlider.oninput = function() {
                        variableDisplay.textContent = this.value + '%';
                        console.log('변동금리:', this.value);
                    };
                }

                if (exportSlider && exportDisplay) {
                    exportSlider.oninput = function() {
                        exportDisplay.textContent = this.value + '%';
                        console.log('수출비중:', this.value);
                    };
                }

                console.log('슬라이더 강제 연결 완료');
            }, 3000);
        };

        // DOM 로드 완료 후 모든 초기화 (테스트 페이지에서 검증된 코드)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 DOM 로드 완료, 초기화 시작');

            // 파티클 애니메이션
            createParticles();

            // 슬라이더 요소 가져오기
            variableDebtSlider = document.getElementById('variable_debt_ratio');
            variableDebtDisplay = document.getElementById('variable_debt_display');
            exportSlider = document.getElementById('export_ratio');
            exportDisplay = document.getElementById('export_display');

            console.log('슬라이더 요소 확인:');
            console.log('variableDebtSlider:', variableDebtSlider);
            console.log('variableDebtDisplay:', variableDebtDisplay);
            console.log('exportSlider:', exportSlider);
            console.log('exportDisplay:', exportDisplay);

            // 변동금리 슬라이더 이벤트 리스너 (테스트 페이지와 동일한 코드)
            if (variableDebtSlider && variableDebtDisplay) {
                variableDebtSlider.addEventListener('input', function(e) {
                    const value = e.target.value;
                    console.log('✅ 변동금리 슬라이더 변경:', value + '%');
                    variableDebtDisplay.textContent = value + '%';
                    updateRiskIndicators();
                });
                console.log('✅ 변동금리 슬라이더 이벤트 리스너 등록 완료');
            } else {
                console.error('❌ 변동금리 슬라이더 요소를 찾을 수 없음');
            }

            // 수출비중 슬라이더 이벤트 리스너 (테스트 페이지와 동일한 코드)
            if (exportSlider && exportDisplay) {
                exportSlider.addEventListener('input', function(e) {
                    const value = e.target.value;
                    console.log('✅ 수출비중 슬라이더 변경:', value + '%');
                    exportDisplay.textContent = value + '%';
                    updateRiskIndicators();
                });
                console.log('✅ 수출비중 슬라이더 이벤트 리스너 등록 완료');
            } else {
                console.error('❌ 수출비중 슬라이더 요소를 찾을 수 없음');
            }

            // 제출 버튼 이벤트 리스너
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) {
                submitBtn.addEventListener('click', handleFormSubmit);
                console.log('✅ 제출 버튼 이벤트 리스너 등록 완료');
            }

            // 입력 필드 모니터링
            document.querySelectorAll('input, select').forEach(field => {
                field.addEventListener('input', updateProgress);
                field.addEventListener('change', updateProgress);
            });

            // 초기 상태 설정
            updateRiskIndicators();
            updateProgress();

            console.log('🎉 모든 초기화 완료! 슬라이더를 드래그해보세요!');
        });

        // 파티클 애니메이션
        function createParticles() {
            const container = document.getElementById('particles');
            if (!container) return;

            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // 리스크 인디케이터 업데이트 (테스트 페이지에서 검증된 코드)
        function updateRiskIndicators() {
            if (!variableDebtSlider || !exportSlider) {
                console.log('슬라이더 요소가 없어서 리스크 업데이트 건너뜀');
                return;
            }

            const variableDebt = parseInt(variableDebtSlider.value);
            const exportRatio = parseInt(exportSlider.value);

            console.log('📊 리스크 인디케이터 업데이트: 변동금리=' + variableDebt + '%, 수출=' + exportRatio + '%');

            // 금리 리스크
            const interestRisk = document.getElementById('interest-risk');
            if (interestRisk) {
                if (variableDebt > 70) {
                    interestRisk.textContent = '높음';
                    interestRisk.style.color = '#FF3366';
                } else if (variableDebt > 40) {
                    interestRisk.textContent = '중간';
                    interestRisk.style.color = '#FF6B35';
                } else {
                    interestRisk.textContent = '낮음';
                    interestRisk.style.color = '#00C896';
                }
                console.log('금리 리스크 업데이트:', interestRisk.textContent);
            }

            // 환율 리스크
            const exchangeRisk = document.getElementById('exchange-risk');
            if (exchangeRisk) {
                if (exportRatio > 60) {
                    exchangeRisk.textContent = '높음';
                    exchangeRisk.style.color = '#FF3366';
                } else if (exportRatio > 30) {
                    exchangeRisk.textContent = '중간';
                    exchangeRisk.style.color = '#FF6B35';
                } else {
                    exchangeRisk.textContent = '낮음';
                    exchangeRisk.style.color = '#00C896';
                }
                console.log('환율 리스크 업데이트:', exchangeRisk.textContent);
            }

            // 총 리스크
            const totalRisk = document.getElementById('total-risk');
            if (totalRisk) {
                const avgRisk = (variableDebt + exportRatio) / 2;
                if (avgRisk > 60) {
                    totalRisk.textContent = '주의 필요';
                    totalRisk.style.color = '#FF3366';
                } else if (avgRisk > 40) {
                    totalRisk.textContent = '모니터링';
                    totalRisk.style.color = '#FF6B35';
                } else {
                    totalRisk.textContent = '양호';
                    totalRisk.style.color = '#00C896';
                }
                console.log('총 리스크 업데이트:', totalRisk.textContent);
            }
        }

        // 프로그레스 업데이트 (디버깅 추가)
        function updateProgress() {
            const filled = document.querySelectorAll('.form-section input:valid, .form-section select:valid').length;
            const total = document.querySelectorAll('.form-section input[required], .form-section select[required]').length;
            const progress = (filled / total) * 100;

            console.log(`📊 프로그레스 업데이트: ${filled}/${total} = ${progress.toFixed(1)}%`);

            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = progress + '%';
                console.log(`✅ 프로그레스 바 너비 설정: ${progress.toFixed(1)}%`);
            } else {
                console.error('❌ progressFill 요소를 찾을 수 없음');
            }

            // 스텝 업데이트
            const newStep = Math.min(Math.floor(progress / 25) + 1, totalSteps);
            if (newStep !== currentStep) {
                currentStep = newStep;
                console.log(`🔄 스텝 변경: ${currentStep} -> ${newStep}`);
                updateSteps();
            }
        }

        function updateSteps() {
            document.querySelectorAll('.step').forEach((step, index) => {
                if (index < currentStep - 1) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (index === currentStep - 1) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
        }

        // 폼 제출 처리
        function handleFormSubmit(e) {
            e.preventDefault();
            console.log('폼 제출 시작');

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>🔄 AI 분석 중...</span>';

            // 폼 데이터 수집
            const form = document.getElementById('companyForm');
            const formData = new FormData(form);
            const data = {};

            // FormData를 JSON으로 변환 (체크박스 처리 포함)
            const rawMaterials = [];

            for (let [key, value] of formData.entries()) {
                if (key === 'raw_materials') {
                    rawMaterials.push(value);
                } else {
                    data[key] = value;
                }
            }

            // 원자재 배열 추가
            data.raw_materials = rawMaterials;

            // 숫자 필드 변환
            if (data.annual_revenue) data.annual_revenue = parseFloat(data.annual_revenue);
            if (data.employee_count) data.employee_count = parseInt(data.employee_count);
            if (data.total_debt) data.total_debt = parseFloat(data.total_debt) || 0;
            if (data.variable_debt_ratio) data.variable_debt_ratio = parseFloat(data.variable_debt_ratio);
            if (data.export_ratio) data.export_ratio = parseFloat(data.export_ratio);

            console.log('폼 데이터:', data);

            // 실제 서버로 데이터 전송
            fetch('/api/register_company', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                console.log('서버 응답:', result);
                if (result.success) {
                    // 분석 결과를 sessionStorage에 저장
                    const analysisData = {
                        ...result,
                        analysis_results: result.analysis_results || {},
                        confidence_score: result.confidence_score || 0.8
                    };
                    sessionStorage.setItem('analysisResult', JSON.stringify(analysisData));
                    console.log('분석 결과 sessionStorage 저장 완료:', analysisData);

                    // 완료 애니메이션
                    document.querySelectorAll('.step').forEach(step => {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    });
                    const progressFill = document.getElementById('progressFill');
                    if (progressFill) {
                        progressFill.style.width = '100%';
                    }

                    // 완료 애니메이션 후 결과 페이지로 이동
                    setTimeout(() => {
                        window.location.href = `/analysis-result?company_name=${encodeURIComponent(result.company_name)}&success=true&node_id=${result.node_id || ''}`;
                    }, 2000);

                } else {
                    alert('❌ 등록 실패: ' + (result.error || result.detail));
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('❌ 서버 오류가 발생했습니다: ' + error);
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>🚀 AI 리스크 분석 시작하기</span>';
            });
        }
    </script>
</body>
</html>